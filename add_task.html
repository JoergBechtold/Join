<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Join</title>

    <!-- Embedding scripts -->
    <!-- Scripts/templates must always be included before the normal scripts.js! -->
    <script src="scripts/database.js"></script>
    <script src="scripts/templates.js"></script>
    <script src="scripts/add_task.js"></script>
    <script src="script.js"></script>

    <!-- Embedding the favicon -->
    <link rel="icon" href="assets/icons/favicon.ico" type="image/x-icon" />

    <!-- Embedding the css -->
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="assets/fonts/fonts.css" />
    <link rel="stylesheet" href="/styles/add_task.css" />
    <link rel="stylesheet" href="/styles/assets.css" />
  </head>

  <body class="body-add-task">
    <div id="header_container"></div>

    <main class="main-add-task">
      <h1 class="h1-add-task">Add Task</h1>

      <form class="form-add-task">
        <div class="add-task-content">
          <div class="form-column left-container">
            <div class="form-group">
              <label for="title">Title <span class="red">*</span></label>
              <input class="input-base" type="text" name="title" placeholder="Enter a title" required />
            </div>

            <div class="form-group">
              <label for="description">Description</label>
              <textarea class="textarea-base" name="description" placeholder="Enter a Description"></textarea>
            </div>

            <div class="form-group">
              <label for="due-date">Due date <span class="red">*</span></label>
              <div class="input-container">
                <input class="input-base" type="text" name="due-date" placeholder="dd/mm/yyyy" required />
                <img class="input-base-icon" src="/assets/icons/event.svg" alt="Calendar" />
              </div>
            </div>
          </div>

          <div class="vertical-line"></div>

          <div class="form-column right-container">
            <div class="form-group">
              <label>Priority</label>
              <div class="prio-buttons">
                <button type="button" class="prio" id="urgent_button" onclick="setPriority('urgent_button')">
                  Urgent
                  <img src="/assets/icons/prio-high.svg" alt="High Priority" class="prio-icon" id="urgent_button_img"/>
                </button>
                <button type="button" class="prio" id="medium_button" onclick="setPriority('medium_button')">
                  Medium
                  <img src="/assets/icons/prio-medium.svg" alt="Medium Priority" class="prio-icon" id="medium_button_img" />
                </button>
                <button type="button" class="prio" id="low_button" onclick="setPriority('low_button')">
                  Low
                  <img src="/assets/icons/prio-low.svg" alt="Low Priority" class="prio-icon" id="low_button_img" />
                </button>
              </div>
            </div>

            <div class="form-group">
              <label for="assigned_to">Assigned to</label>
                <div class="custom-select-container" >
                   <div class="custom-select" id="custom_select" onclick="toggleContactsDropdown()">
                  <input class="custom-input" type="text" id="selected_contact" placeholder="Select contacts to assign" oninput="filterContacts()" autocomplete="off"/>
                   <img class="select-icon" id="contacts_select_arrow" src="/assets/icons/arrow_drop_down.svg" alt="Arrow" />
                 </div>
                 <div class="contacts-custom-options d-none" id="contacts_options_container">
                 </div>
                 <div class="show-selected-contacts"></div>
                </div>
            </div>
            
            <div class="form-group">
              <label for="category">Category <span class="red">*</span></label>
              <div class="custom-select-container">
                <div class="custom-select"  onclick="toggleDropdown()">
                  <span id="selected_option">Select task category</span>
                  <img class="select-icon" id="select_arrow" src="/assets/icons/arrow_drop_down.svg" alt="Arrow"  />
                </div>
                <div class="custom-options d-none" id="options_container">
                  <div class="custom-select-option" onclick="selectOption('Technical Task')">Technical Task</div>
                  <div class="custom-select-option" onclick="selectOption('User Story')">User Story</div>
                </div>
              </div>
            </div>

            <div class="form-group" >
              <label for="subtasks">Subtasks</label>
              <div class="input-container">
                <input id="subtask_input" class="input-base" type="text" name="subtasks" placeholder="Add new subtask" onclick="handleSubtaskInput()" />
                <div class="close-and-check">
                <img id="close_subtask_icon" class="input-base-icon d-none" src="/assets/icons/blackclose.svg" alt="Close subtask" onclick="handleSubtaskDelete()" />
                <div class="vertical-line-subtask"></div>
                <img id="check_subtask_icon" class="input-base-icon d-none" src="/assets/icons/blackcheck.svg" alt="Save subtask" onclick="handleSubtaskSave()" />
                <img id="add_subtask_icon" class="input-base-icon" src="/assets/icons/add.svg" alt="Add subtask"  onclick="handleSubtaskInputImg()"/>
                </div>
              </div>
              <div class="subtask-enum"></div>
              <div class="input-container">
              <input id="edit_subtask_input" class="input-base-V2 d-none" type="text" name="edit-subtasks" placeholder="Edit subtask"/>
              <div class="close-and-check">
                <img id="edit_delete_icon" class="input-base-V2-icon-active d-none" src="/assets/icons/paperbasketdelet.svg" alt="Delete" onclick="cancelEditSubtask()" />
                <div class="vertical-line-subtask"></div>
                <img id="edit_save_icon" class="input-base-V2-icon-active d-none" src="/assets/icons/blackcheck.svg" alt="Save" onclick="saveEditedSubtask()" />
            </div>
             </div>
            </div>
            
          </div>
          <div class="spacer"></div>
        </div>
      </form>
      <div class="footer-add-task">
        <div class="required-text"><span class="red">*</span> This field is required</div>
        <div class="align-with-gap">
          <button type="button" class="button-clear-white align"  onclick="clearAll()">
            Clear
            <div class="button-clear-white-img-box">
              <img class="button-clear-white-standard-img" src="/assets/icons/cancel.svg" alt="Clear" />
              <img class="button-clear-white-hover-img" src="/assets/icons/x-mark-blue.svg" alt="Clear" />
            </div>
          </button>
          <button disabled type="submit" class="button-create-task-gray align">
            Create Task
            <img src="/assets/icons/check.svg" alt="Check" />
          </button>
        </div>
      </div>
    </main>


    <script src="./scripts/load-header.js"></script>
  </body>
</html>
