<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Join</title>

    <!-- Embedding the favicon -->
    <link rel="icon" href="assets/icons/favicon.ico" type="image/x-icon" />
    <base href="./" />

    <!-- Embedding the css -->
    <link rel="stylesheet" href="assets/fonts/fonts.css" />
    <link rel="stylesheet" href="styles/index.css" />
    <link rel="stylesheet" href="styles/header_sidebar.css" />
    <link rel="stylesheet" href="styles/add_task.css" />
    <link rel="stylesheet" href="styles/add_task_assets.css" />
    <link rel="stylesheet" href="styles/board_task_popup.css" />
    <link rel="stylesheet" href="styles/assets.css" />
    <link rel="stylesheet" href="style.css" />

    <!-- Checks whether the user is logged in. If not then links to login_register.html -->
    <script>
      if (sessionStorage.getItem('loggedIn') === null) {
          window.location.href = 'login_register.html';
      }
  </script>

  </head>
  <body class="body-board" onload="startProcess()">
  
    <div id="header_container"></div>

    <div id="overlay" class="overlay" onclick="if(event.target === this){ closePopup(); }"></div>

    <div class="board-add-task" id="board_add_task"></div>

    <main class="main-board">
      <div class="headline-input-container">
        <span>Board</span>
        <div class="search-input-add-button-div">
          <div class="search-input-div">
            <input id="find_cards" oninput="searchCards()" class="search-inputfield" type="text" />
            <div class="placeholder"></div>
            <img src="assets/icons/search.svg" class="search-icon" alt="" />
          </div>
          <button onclick="openBoardAddTaskForm(); fetchAddTask()" class="button-primary-dark-gray">Add Task +</button>
        </div>
      </div>

      <div class="card-container">
        <div>
          <span class="column-title"
            >To do
            <img onclick="openBoardAddTaskForm(); fetchAddTask()" src="assets/icons/plus-button.svg" alt="add icon" class="add-button-img-column" />
          </span>
          <div
            class="drag-area"
            id="open"
            ondrop="moveTo('open')"
            ondragleave="removeHighlight('open')"
            ondragover="allowDrop(event); highlight('open')"
          ></div>
        </div>

        <div>
          <span class="column-title"
            >In Progress
            <img onclick="openBoardAddTaskForm(); fetchAddTask() " src="assets/icons/plus-button.svg" alt="add icon" class="add-button-img-column" />
          </span>
          <div
            class="drag-area"
            id="in-progress"
            ondrop="moveTo('in-progress')"
            ondragleave="removeHighlight('in-progress')"
            ondragover="allowDrop(event); highlight('in-progress')"
          ></div>
        </div>

        <div>
          <span class="column-title"
            >Await feedback
            <img onclick="openBoardAddTaskForm(); fetchAddTask()" src="assets/icons/plus-button.svg" alt="add icon" class="add-button-img-column" />
          </span>
          <div
            class="drag-area"
            id="await-feedback"
            ondrop="moveTo('await-feedback')"
            ondragleave="removeHighlight('await-feedback')"
            ondragover="allowDrop(event); highlight('await-feedback')"
          ></div>
        </div>

        <div>
          <span class="column-title">Done</span>
          <div
            class="drag-area"
            id="done"
            ondrop="moveTo('done')"
            ondragleave="removeHighlight('done')"
            ondragover="allowDrop(event); highlight('done')"
          ></div>
        </div>
      </div>
    </main>

    <!-- Popup-Container -->
    <div class="popup-container" id="popup_container" style="display: none">
      <div id="popup" class="popup"></div>
    </div>

    <div id="edit_popup" class="edit-popup">
      <div class="edit-close-buttton-container">
        <button class="close-button" type="button" onclick="closePopup()">
          <img src="assets/icons/cancel.svg" alt="Close" class="close-icon" />
        </button>
      </div>

      <div id="add_task_fetch_template"></div>

      <div class="footer-add-task ok-btn-container">
        <div class="align-with-gap">
          <div class="button-clear-white-img-box"></div>
          <button type="submit" class="button-create-task-gray align" onclick="checkandSubmit()">
            Ok
            <img src="assets/icons/check.svg" alt="Check" />
          </button>
        </div>
      </div>
      <div class="popup-overlay-small-gray" id="popup_overlay_task_added">
        <div class="popup-small-gray custom-task" id="popup_task_added">
          <span>Task added to board</span>
          <img src="assets/icons/boardicon.svg" alt="Board Icon" />
        </div>
      </div>
    </div>

    <!-- Template fÃ¼r Add Task Formular -->
    <template class="add-task-template-container" id="addTaskTemplate">
      <div onclick="closeDropdownOnBodyClick(event)" class="popup-add-task">
        <button class="close-button-popup" onclick="closeBoardAddTask()">
          <img src="assets/icons/cancel.svg" alt="" />
        </button>

        <!-- fetch template popup add task -->
        <div id="add_task_fetch_template"></div>
      </div>
    </template>



    

    <!-- Embedding scripts -->
    <!-- Scripts/templates must always be included before the normal scripts.js! -->
    <script src="scripts/firebase.js"></script>
    <script src="scripts/load-header.js"></script>
    <script src="scripts/login-register.js"></script>
    <script src="scripts/add-task-templates.js"></script>
    <script src="scripts/add-task.js"></script>
    <script src="scripts/add-taks-priority-buttons.js"></script>
    <script src="scripts/add-taks-subtasks.js"></script>
    <script src="scripts/add-task-assigned-to.js"></script>
    <script src="scripts/board.js"></script>
    <script src="scripts/template/extended-Taskcard-popup.js"></script>
    <script src="scripts/board-task-popup.js"></script>
    <script src="script.js"></script>
  </body>
</html>
